{% load static %}
<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Dynamic Title & Meta Description -->
    <title>{{ post.title }} - RiseLab</title>
    <meta name="description" content="{{ post.content|striptags|truncatechars:160 }}">
    <meta name="keywords" content="RiseLab, ბლოგი, {{ post.title }}, ახალგაზრდების განვითარება, ტრენინგები, საქველმოქმედო აქტივობები, საქართველო, informal education, youth empowerment">

    <!-- Author & Language -->
    <meta name="author" content="{{ post.author }}">
    <meta name="language" content="ka-GE">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.riselab.ge/blog/{{ post.slug }}/">

    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="{{ post.title }} - RiseLab">
    <meta property="og:description" content="{{ post.content|striptags|truncatechars:160 }}">
    <meta property="og:image" content="{{ post.hero_image.url }}">
    <meta property="og:url" content="https://www.riselab.ge/blog/{{ post.slug }}/">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="ka_GE">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ post.title }} - RiseLab">
    <meta name="twitter:description" content="{{ post.content|striptags|truncatechars:160 }}">
    <meta name="twitter:image" content="{{ post.hero_image.url }}">

    <!-- Favicons & Styles -->
    <link rel="icon" type="image/png" href="{% static 'pics/Untitled3.png' %}">
    <link rel="stylesheet" href="{% static 'blog.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Itim&display=swap" rel="stylesheet">

    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "headline": "{{ post.title }}",
      "image": "{{ post.hero_image.url }}",
      "author": {
        "@type": "Person",
        "name": "{{ post.author }}"
      },
      "publisher": {
        "@type": "Organization",
        "name": "RiseLab",
        "logo": {
          "@type": "ImageObject",
          "url": "{% static 'pics/Untitled3.png' %}"
        }
      },
      "datePublished": "{{ post.published_date|date:'Y-m-d' }}",
      "dateModified": "{{ post.updated_date|date:'Y-m-d' if post.updated_date else post.published_date|date:'Y-m-d' }}",
      "mainEntityOfPage": "https://www.riselab.ge/blog/{{ post.slug }}/",
      "description": "{{ post.content|striptags|truncatechars:160 }}"
    }
    </script>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-left">
            <img src="{% static 'pics/Untitled3.png' %}" alt="RiseLab Logo">
            <h1>RiseLab</h1>
        </div>
        <div class="nav-links">
            <a href="{% url 'index' %}">მთავარი</a>
            <a href="{% url 'aboutus' %}">ჩვენ შესახებ</a>
            <a href="{% url 'blogs' %}">ბლოგი</a>
            <a href="{% url 'contact' %}">კონტაქტი</a>
        </div>
        <div class="burger">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>

    <!-- Hero Image -->
    <section class="hero-post">
        <img src="{{ post.hero_image.url }}" alt="{{ post.title }}">
        <div class="hero-text">
            <h2>{{ post.title }}</h2>
        </div>
    </section>

    <!-- Blog Content -->
    <main class="blog-container">
        <article class="blog-post">
            <p class="post-meta">პუბლიკაცია: {{ post.published_date|date:"d M Y" }} | ავტორი: {{ post.author }}</p>
            <div class="post-image">
                <img src="{{ post.image.url }}" alt="{{ post.title }}">
            </div>
            <div class="post-content">
                {{ post.content|safe }}
            </div>
        </article>

        <!-- Sidebar -->
        <aside class="sidebar">
            <h3>სხვა სტატიები</h3>
            {% for related in related_posts %}
            <div class="sidebar-post">
                <img src="{{ related.image.url }}" alt="{{ related.title }}">
                <div>
                    <h4>{{ related.title|truncatechars:30 }}</h4>
                    <a href="{% url 'blog_detail' related.slug %}">იხილე</a>
                </div>
            </div>
            {% endfor %}
        </aside>
    </main>

    <script src="{% static 'blogs.js' %}"></script>
</body>
</html>
